!function(t){window.Skyline.DatePicker=function(e,i){this.id=Skyline.guid(),this.el=e,this.$el=t(e),this.options=t.extend(window.Skyline.DatePicker._defaults,i),i&&i.hasOwnProperty("i18n")&&"object"==typeof i.i18n&&(this.options.i18n=t.extend({},window.Skyline.DatePicker.defaults.i18n,i.i18n)),this.options.minDate&&this.options.minDate.setHours(0,0,0,0),this.options.maxDate&&this.options.maxDate.setHours(0,0,0,0),this.$modalEl=t(window.Skyline.DatePicker._template),this.modalEl=this.$modalEl[0],this.calendarEl=this.modalEl.querySelector(".datepicker-calendar"),this.yearTextEl=this.modalEl.querySelector(".year-text"),this.dateTextEl=this.modalEl.querySelector(".date-text"),this.options.showClearBtn&&(this.clearBtn=this.modalEl.querySelector(".datepicker-clear")),this.doneBtn=this.modalEl.querySelector(".datepicker-done"),this.cancelBtn=this.modalEl.querySelector(".datepicker-cancel"),this.formats={d:t=>t.getDate(),dd:t=>{let e=t.getDate();return(e<10?"0":"")+e},ddd:t=>this.options.i18n.weekdaysShort[t.getDay()],dddd:t=>this.options.i18n.weekdays[t.getDay()],m:t=>t.getMonth()+1,mm:t=>{let e=t.getMonth()+1;return(e<10?"0":"")+e},mmm:t=>this.options.i18n.monthsShort[t.getMonth()],mmmm:t=>this.options.i18n.months[t.getMonth()],yy:t=>(""+t.getFullYear()).slice(2),yyyy:t=>t.getFullYear()},this.options.showClearBtn&&(t(this.clearBtn).css({visibility:""}),this.clearBtn.innerHTML=this.options.i18n.clear),this.doneBtn.innerHTML=this.options.i18n.done,this.cancelBtn.innerHTML=this.options.i18n.cancel,this.options.container?this.$modalEl.appendTo(this.options.container):this.$modalEl.insertBefore(this.el),this.modalEl.id="modal-"+this.id;var n=this;t(this.modalEl).on("hidden.bs.modal",(function(){n.isOpen=!1}));var a={_handleInputClick:function(){this.options.autoOpen&&this.open()},_handleInputKeydown:function(t){t.which===Skyline.keys.ENTER&&this.options.autoOpen&&(t.preventDefault(),this.open())},_handleCalendarClick:function(e){if(!this.isOpen)return;let i=t(e.target);i.hasClass("is-disabled")||(!i.hasClass("datepicker-day-button")||i.hasClass("is-empty")||i.parent().hasClass("is-disabled")?i.closest(".month-prev").length?this.prevMonth():i.closest(".month-next").length&&this.nextMonth():(this.setDate(new Date(e.target.getAttribute("data-year"),e.target.getAttribute("data-month"),e.target.getAttribute("data-day"))),this.options.autoClose&&this._finishSelectionBound()))},_handleClearClick:function(){this.date=null,this.setInputValue(),this.close()},_handleMonthChange:function(t){this.gotoMonth(t.target.value)},_handleYearChange:function(t){this.gotoYear(t.target.value)},_handleInputChange:function(e){let i;if(e.firedBy!==this){if(this.$el.removeClass("is-invalid"),this.options.parse)try{i=this.options.parse(this.el.value,this.options.format,this)}catch(e){this.$el.addClass("is-invalid")}else i=new Date(Date.parse(this.el.value));window.Skyline.DatePicker._isDate(i)&&(this.setDate(i),this.options.autoUpdate?this.setInputValue():this.options.mirror&&this.options.mirrorFormat&&t(this.options.mirror).val(this.formatDate(i,this.options.mirrorFormat)))}},_finishSelection(){this.setInputValue(),this.close()}};this.close=function(){if(this.isOpen)return this.isOpen=!1,"function"==typeof this.options.onClose&&this.options.onClose.call(this),t("#modal-"+this.id).modal("hide"),this},this._handleInputKeydownBound=a._handleInputKeydown.bind(this),this._handleInputClickBound=a._handleInputClick.bind(this),this._handleInputChangeBound=a._handleInputChange.bind(this),this._handleCalendarClickBound=a._handleCalendarClick.bind(this),this._finishSelectionBound=a._finishSelection.bind(this),this._handleMonthChange=a._handleMonthChange.bind(this),this._closeBound=this.close.bind(this),this.el.addEventListener("click",this._handleInputClickBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.el.addEventListener("change",this._handleInputChangeBound),this.calendarEl.addEventListener("click",this._handleCalendarClickBound),this.doneBtn.addEventListener("click",this._finishSelectionBound),this.cancelBtn.addEventListener("click",this._closeBound),this.options.showClearBtn&&(this._handleClearClickBound=a._handleClearClick.bind(this),this.clearBtn.addEventListener("click",this._handleClearClickBound)),this.removeEventHandlers=function(){this.el.removeEventListener("click",this._handleInputClickBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound),this.el.removeEventListener("change",this._handleInputChangeBound),this.calendarEl.removeEventListener("click",this._handleCalendarClickBound)},this.gotoMonth=function(t){isNaN(t)||(this.calendars[0].month=parseInt(t,10),this.adjustCalendars())},this.gotoYear=function(t){isNaN(t)||(this.calendars[0].year=parseInt(t,10),this.adjustCalendars())},this.gotoDate=function(t){let e=!0;if(window.Skyline.DatePicker._isDate(t)){if(this.calendars){let i=new Date(this.calendars[0].year,this.calendars[0].month,1),n=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),a=t.getTime();n.setMonth(n.getMonth()+1),n.setDate(n.getDate()-1),e=a<i.getTime()||n.getTime()<a}e&&(this.calendars=[{month:t.getMonth(),year:t.getFullYear()}]),this.adjustCalendars()}},this.renderDayName=function(t,e,i){for(e+=t.firstDay;e>=7;)e-=7;return i?t.i18n.weekdaysAbbrev[e]:t.i18n.weekdays[e]},this.open=function(){if(!this.isOpen)return this.isOpen=!0,"function"==typeof this.options.onOpen&&this.options.onOpen.call(this),this.draw(),t("#modal-"+this.id).modal("show"),this},this.setDate=function(t,e){if(!t)return this.date=null,this._renderDateDisplay(),this.draw();if("string"==typeof t&&(t=new Date(Date.parse(t))),!window.Skyline.DatePicker._isDate(t))return;let i=this.options.minDate,n=this.options.maxDate;window.Skyline.DatePicker._isDate(i)&&t<i?t=i:window.Skyline.DatePicker._isDate(n)&&t>n&&(t=n),this.date=new Date(t.getTime()),this._renderDateDisplay(),window.Skyline.DatePicker._setToStartOfDay(this.date),this.gotoDate(this.date),e||"function"!=typeof this.options.onSelect||this.options.onSelect.call(this,this.date)},this.toString=function(t){return t=t||this.options.format,window.Skyline.DatePicker._isDate(this.date)?this.formatDate(this.date,t):""},this.formatDate=function(t,e){return e.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g).map(e=>this.formats[e]?this.formats[e](t):e).join("")},this.setInputValue=function(){this.el.value=this.toString(),this.options.mirror&&this.options.mirrorFormat&&t(this.options.mirror).val(this.date?this.formatDate(this.date,this.options.mirrorFormat):""),this.$el.trigger("change",{firedBy:this})},this.adjustCalendars=function(){this.calendars[0]=this.adjustCalendar(this.calendars[0]),this.draw()},this.adjustCalendar=function(t){return t.month<0&&(t.year-=Math.ceil(Math.abs(t.month)/12),t.month+=12),t.month>11&&(t.year+=Math.floor(Math.abs(t.month)/12),t.month-=12),t},this.nextMonth=function(){this.calendars[0].month++,this.adjustCalendars()},this.prevMonth=function(){this.calendars[0].month--,this.adjustCalendars()},this.render=function(t,e,i){let n=this.options,a=new Date,s=window.Skyline.DatePicker._getDaysInMonth(t,e),o=new Date(t,e,1).getDay(),r=[],l=[];window.Skyline.DatePicker._setToStartOfDay(a),n.firstDay>0&&(o-=n.firstDay,o<0&&(o+=7));let d=0===e?11:e-1,h=11===e?0:e+1,c=0===e?t-1:t,u=11===e?t+1:t,p=window.Skyline.DatePicker._getDaysInMonth(c,d),y=s+o,m=y;for(;m>7;)m-=7;y+=7-m;let D=!1;for(let i=0,m=0;i<y;i++){let y=new Date(t,e,i-o+1),k=!!window.Skyline.DatePicker._isDate(this.date)&&window.Skyline.DatePicker._compareDates(y,this.date),w=window.Skyline.DatePicker._compareDates(y,a),f=-1!==n.events.indexOf(y.toDateString()),g=i<o||i>=s+o,v=i-o+1,b=e,S=t,_=n.startRange&&window.Skyline.DatePicker._compareDates(n.startRange,y),C=n.endRange&&window.Skyline.DatePicker._compareDates(n.endRange,y),M=n.startRange&&n.endRange&&n.startRange<y&&y<n.endRange,P=n.minDate&&y<n.minDate||n.maxDate&&y>n.maxDate||n.disableWeekends&&window.Skyline.DatePicker._isWeekend(y)||n.disableDayFn&&n.disableDayFn(y);g&&(i<o?(v=p+v,b=d,S=c):(v-=s,b=h,S=u));let E={day:v,month:b,year:S,hasEvent:f,isSelected:k,isToday:w,isDisabled:P,isEmpty:g,isStartRange:_,isEndRange:C,isInRange:M,showDaysInNextAndPreviousMonths:n.showDaysInNextAndPreviousMonths};l.push(this.renderDay(E)),7==++m&&(r.push(this.renderRow(l,n.isRTL,D)),l=[],m=0,D=!1)}return this.renderTable(n,r,i)},this.renderDay=function(t){let e=[],i="false";if(t.isEmpty){if(!t.showDaysInNextAndPreviousMonths)return'<td class="is-empty"></td>';e.push("is-outside-current-month"),e.push("is-selection-disabled")}return t.isDisabled&&e.push("is-disabled"),t.isToday&&e.push("is-today"),t.isSelected&&(e.push("is-selected"),i="true"),t.hasEvent&&e.push("has-event"),t.isInRange&&e.push("is-inrange"),t.isStartRange&&e.push("is-startrange"),t.isEndRange&&e.push("is-endrange"),`<td data-day="${t.day}" class="${e.join(" ")}" aria-selected="${i}"><button class="datepicker-day-button" type="button" data-year="${t.year}" data-month="${t.month}" data-day="${t.day}">${t.day}</button></td>`},this.renderRow=function(t,e,i){return'<tr class="datepicker-row'+(i?" is-selected":"")+'">'+(e?t.reverse():t).join("")+"</tr>"},this.renderTable=function(t,e,i){return'<div class="datepicker-table-wrapper"><table cellpadding="0" cellspacing="0" class="datepicker-table" role="grid" aria-labelledby="'+i+'">'+this.renderHead(t)+this.renderBody(e)+"</table></div>"},this.renderHead=function(t){let e,i=[];for(e=0;e<7;e++)i.push(`<th scope="col"><abbr title="${this.renderDayName(t,e)}">${this.renderDayName(t,e,!0)}</abbr></th>`);return"<thead><tr>"+(t.isRTL?i.reverse():i).join("")+"</tr></thead>"},this.renderBody=function(t){return"<tbody>"+t.join("")+"</tbody>"},this.renderTitle=function(e,i,n,a,s,o){let r,l,d,h,c,u=this.options,p=n===u.minYear,y=n===u.maxYear,m='<div id="'+o+'" class="datepicker-controls" role="heading" aria-live="assertive">',D=!0,k=!0;for(d=[],r=0;r<12;r++)d.push('<option value="'+(n===s?r-i:12+r-i)+'"'+(r===a?' selected="selected"':"")+(p&&r<u.minMonth||y&&r>u.maxMonth?'disabled="disabled"':"")+">"+u.i18n.months[r]+"</option>");for(h='<select class="datepicker-select orig-select-month custom-select" tabindex="-1">'+d.join("")+"</select>",t.isArray(u.yearRange)?(r=u.yearRange[0],l=u.yearRange[1]+1):(r=n-u.yearRange,l=1+n+u.yearRange),d=[];r<l&&r<=u.maxYear;r++)r>=u.minYear&&d.push(`<option value="${r}" ${r===n?'selected="selected"':""}>${r}</option>`);c=`<select class="datepicker-select orig-select-year custom-select" tabindex="-1">${d.join("")}</select>`;m+=`<button class="month-prev${D?"":" is-disabled"}" type="button"><svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"/><path d="M0-.5h24v24H0z" fill="none"/></svg></button>`,m+='<div class="selects-container input-group">',u.showMonthAfterYear?m+=c+h:m+=h+c,m+="</div>",p&&(0===a||u.minMonth>=a)&&(D=!1),y&&(11===a||u.maxMonth<=a)&&(k=!1);return m+=`<button class="month-next${k?"":" is-disabled"}" type="button"><svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"/><path d="M0-.25h24v24H0z" fill="none"/></svg></button>`,m+"</div>"},this.draw=function(t){if(!this.isOpen&&!t)return;let e,i=this.options,n=i.minYear,s=i.maxYear,o=i.minMonth,r=i.maxMonth,l="";this._y<=n&&(this._y=n,!isNaN(o)&&this._m<o&&(this._m=o)),this._y>=s&&(this._y=s,!isNaN(r)&&this._m>r&&(this._m=r)),e="datepicker-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2);for(let t=0;t<1;t++)this._renderDateDisplay(),l+=this.renderTitle(this,t,this.calendars[t].year,this.calendars[t].month,this.calendars[0].year,e)+this.render(this.calendars[t].year,this.calendars[t].month,e);this.calendarEl.innerHTML=l;let d=this.calendarEl.querySelector(".orig-select-year"),h=this.calendarEl.querySelector(".orig-select-month");d.addEventListener("change",a._handleYearChange.bind(this)),h.addEventListener("change",a._handleMonthChange.bind(this)),"function"==typeof this.options.onDraw&&this.options.onDraw(this)},this._renderDateDisplay=function(){let t=window.Skyline.DatePicker._isDate(this.date)?this.date:new Date;this.yearTextEl.innerHTML=t.getFullYear(),this.dateTextEl.innerHTML=this.formatDate(t,this.options.displayFormat)},this.options.defaultDate||(this.options.defaultDate=new Date(Date.parse(this.el.value)));let s=this.options.defaultDate;window.Skyline.DatePicker._isDate(s)?this.options.setDefaultDate?(this.setDate(s,!0),this.setInputValue()):this.gotoDate(s):this.gotoDate(new Date),this.isOpen=!1},window.Skyline.DatePicker.Parser={standard:function(t,e){let i;if(i=/^\s*(\d+)\s*([\/\-.])\s*(\d+)\s*(?:([\/\-.])\s*(\d+)|)\s*$/.exec(t))return i[5]||(i[5]=(new Date).getFullYear()),"-"==i[2]||"/"==i[2]?new Date(i[1],i[3]-1,i[5]):new Date(i[5],i[3]-1,i[1])},lingual:function(t,e,i){let n=0,a=0,s=0;if(t.split(/(\d+|\w+)/g).map((function(t){let e=i.options.i18n.months.indexOf(t);return e>-1?(a=e,""):(e=i.options.i18n.monthsShort.indexOf(t),e>-1?(a=e,""):isNaN(t)?"":t)})).forEach((function(t){let e=1*t;if(e)return e>100?s=e:void(n=e)})),n&&a&&s)return new Date(s,a,n);throw new Error("Can not parse date string")},all:function(t,e,i){let n=!1;try{n=window.Skyline.DatePicker.Parser.lingual(t,e,i)}catch(t){n=!1}if(Skyline.DatePicker._isDate(n)||(n=window.Skyline.DatePicker.Parser.standard(t,e)),Skyline.DatePicker._isDate(n))return n;throw new Error("Can not parse date string")}},window.Skyline.DatePicker._defaults={autoClose:!1,autoOpen:!0,autoUpdate:!1,format:"ddd, d. mmmm yyyy",displayFormat:"dddd<br>d. mmm",mirror:null,mirrorFormat:null,parse:Skyline.DatePicker.Parser.all,defaultDate:null,setDefaultDate:!1,disableWeekends:!1,disableDayFn:null,firstDay:1,minDate:null,maxDate:null,yearRange:10,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,container:t(document.body),showClearBtn:!1,i18n:{cancel:"Cancel",clear:"Clear",done:"Ok",previousMonth:"‹",nextMonth:"›",months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysAbbrev:["S","M","T","W","T","F","S"]},events:[],onSelect:null,onOpen:null,onClose:null,onDraw:null},window.Skyline.DatePicker._isDate=function(t){return/Date/.test(Object.prototype.toString.call(t))&&!isNaN(t.getTime())},window.Skyline.DatePicker._isWeekend=function(t){let e=t.getDay();return 0===e||6===e},window.Skyline.DatePicker._setToStartOfDay=function(t){window.Skyline.DatePicker._isDate(t)&&t.setHours(0,0,0,0)},window.Skyline.DatePicker._getDaysInMonth=function(t,e){return[31,window.Skyline.DatePicker._isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},window.Skyline.DatePicker._isLeapYear=function(t){return t%4==0&&t%100!=0||t%400==0},window.Skyline.DatePicker._compareDates=function(t,e){return t.getTime()===e.getTime()},window.Skyline.DatePicker._setToStartOfDay=function(t){window.Skyline.DatePicker._isDate(t)&&t.setHours(0,0,0,0)},t.fn.datepicker=function(e,i){t(this).each((function(){this.Sky_Datepicker||(this.Sky_Datepicker=new window.Skyline.DatePicker(this,i))}));var n=this[0].Sky_Datepicker;return"open"==e&&n.open(),"instance"==e?n:this},window.Skyline.DatePicker._template=['<div class= "modal datepicker-modal fade" role="dialog">','<div class="modal-dialog" role="document">','<div class="modal-content datepicker-container">','<div class="datepicker-date-display">','<span class="year-text"></span>','<span class="date-text"></span>',"</div>",'<div class="datepicker-calendar-container">','<div class="datepicker-calendar"></div>','<div class="datepicker-footer">','<div><button class="btn btn-outline-danger btn-sm datepicker-clear" style="visibility: hidden;" type="button"></button></div>','<div class="confirmation-btns mb-3">','<button class="btn btn-outline-secondary btn-sm mr-3 datepicker-cancel" type="button"></button>','<button class="btn btn-outline-success btn-sm datepicker-done" type="button"></button>',"</div>","</div>","</div>","</div>","</div>","</div>"].join("")}(jQuery);
